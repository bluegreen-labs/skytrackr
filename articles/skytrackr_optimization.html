<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Optimization tips • skytrackr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,300;0,400;0,700;1,300;1,400&amp;display=swap" rel="stylesheet">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../bglabs.css" rel="stylesheet">
<meta property="og:title" content="Optimization tips">
<!-- Mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script>
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">

    <div class="navbar-header">

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="external-link hidden-sm hidden-xs" href="https://bluegreenlabs.org">
          <img src="https://bluegreenlabs.org/img/logo_text_small.png" id="hexlogo" alt="bluegreen labs"></a>
        <a class="external-link hidden-md hidden-lg" href="https://bluegreenlabs.org">
          <img src="https://bluegreenlabs.org/img/logo.png" id="hexlogo" alt="bluegreen labs"></a>
        <a class="navbar-brand" href="../index.html">
           <i>skytrackr <small>v1.1</small></i>
        </a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/skytrackr_optimization.html">Optimization tips</a>
    </li>
    <li>
      <a href="../articles/skytrackr_parallel_processing.html">Parallel processing</a>
    </li>
    <li>
      <a href="../articles/skytrackr_vignette.html">The skytrackr R package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/bluegreen-labs/skytrackr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Optimization tips</h1>
            <h3 data-toc-skip class="subtitle">achieving robust location estimates</h3>
                        <h4 data-toc-skip class="author">Koen Hufkens</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bluegreen-labs/skytrackr/blob/main/vignettes/skytrackr_optimization.Rmd" class="external-link"><code>vignettes/skytrackr_optimization.Rmd</code></a></small>
      <div class="hidden name"><code>skytrackr_optimization.Rmd</code></div>

    </div>

    
    
<div class="section level2" number="1">
<h2 id="introduction">
<span class="header-section-number">1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Geolocation by light is as much an art as it is a science, as certain decisions in your data workflow will affect the accuracy of your location estimates. It is therefore key to understand which decisions to be mindful of during your workflow. Below I’ll briefly touch upon some of these aspects.</p>
</div>
<div class="section level2" number="2">
<h2 id="pre-processing">
<span class="header-section-number">2</span> Pre-processing<a class="anchor" aria-label="anchor" href="#pre-processing"></a>
</h2>
<p>Before you start an estimation location there are a number of steps you can undertake to maximize the quality of your results.</p>
<div class="section level3" number="2.1">
<h3 id="data-quality">
<span class="header-section-number">2.1</span> Data quality<a class="anchor" aria-label="anchor" href="#data-quality"></a>
</h3>
<p>Invariably the quality of your location estimates will depend on the quality of your input (logger) data. This means that poor quality data (due to false twilights or nest visits during the day) will negatively affect a location estimate’s accuracy. To remove the most common sources of error the <code><a href="../reference/stk_screen_twl.html">stk_screen_twl()</a></code> function is included. <strong>Eliminating poor quality days will improve location estimates</strong> as there is a temporal dependency between the current estimate and the previous one.</p>
<p>To inspect data quality you can visualize the full light profile by using the <code><a href="../reference/stk_profile.html">stk_profile()</a></code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># an overview profile</span></span>
<span><span class="va">cc876</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/stk_profile.html">stk_profile</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="skytrackr_optimization_files/figure-html/unnamed-chunk-1-1.png" width="85%" style="display: block; margin: auto;">
You can also use the <code><a href="../reference/stk_filter.html">stk_filter()</a></code>, used to flag and filter the data to process using the <code>range</code> parameter, with the <code>plot</code> parameter set to TRUE. This returns a plot of the selected data as well as the annotated dataset.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># an overview profile</span></span>
<span><span class="va">cc876</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/stk_filter.html">stk_filter</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.09</span>, <span class="fl">400</span><span class="op">)</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; → Smoothing the data using a Hampel filter[outliers will be replaced with interpolated values]</span></span></code></pre></div>
<p><img src="skytrackr_optimization_files/figure-html/unnamed-chunk-2-1.png" width="85%" style="display: block; margin: auto;"></p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8,638 × 8</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   logger, date [30]</span></span></span>
<span><span class="co">#&gt;    logger date_time           date        hour measurement value outlier</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> CC876  2021-08-02 <span style="color: #949494;">00:09:10</span> 2021-08-02 0.153 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> CC876  2021-08-02 <span style="color: #949494;">00:14:10</span> 2021-08-02 0.236 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> CC876  2021-08-02 <span style="color: #949494;">00:19:10</span> 2021-08-02 0.319 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> CC876  2021-08-02 <span style="color: #949494;">00:24:10</span> 2021-08-02 0.403 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> CC876  2021-08-02 <span style="color: #949494;">00:29:10</span> 2021-08-02 0.486 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> CC876  2021-08-02 <span style="color: #949494;">00:34:10</span> 2021-08-02 0.569 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> CC876  2021-08-02 <span style="color: #949494;">00:39:10</span> 2021-08-02 0.653 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> CC876  2021-08-02 <span style="color: #949494;">00:44:10</span> 2021-08-02 0.736 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> CC876  2021-08-02 <span style="color: #949494;">00:49:10</span> 2021-08-02 0.819 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> CC876  2021-08-02 <span style="color: #949494;">00:54:10</span> 2021-08-02 0.903 lux          0.08 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8,628 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: selected &lt;lgl&gt;</span></span></span></code></pre>
</div>
<div class="section level3" number="2.2">
<h3 id="data-frequency">
<span class="header-section-number">2.2</span> Data frequency<a class="anchor" aria-label="anchor" href="#data-frequency"></a>
</h3>
<p>Unlike a purely twilight based approach to location estimates the {skytrackr} package uses all, or part of, the measured diurnal light cycle. By adjusting the <code>range</code> parameter you can include more or less data. Depending on the quality of the data including more data, outside the strict twilight range can be beneficial. You can explore the influence of your range parameter using the <code><a href="../reference/stk_filter.html">stk_filter()</a></code> function (see above).</p>
<p>Including more data will increase the required computational power, i.e. time, for a good estimate. It is also important to note that some loggers (e.g. those by the Swiss ornithological society) do not register a full diurnal profile. In short, always <strong>inspect a daily light profile</strong> to establish if a full diurnal cycle is recorded, to exclude any baseline and saturated values (i.e. fill values), and assess the quality (noise) of the data.</p>
</div>
<div class="section level3" number="2.3">
<h3 id="the-scale-parameter">
<span class="header-section-number">2.3</span> The scale parameter<a class="anchor" aria-label="anchor" href="#the-scale-parameter"></a>
</h3>
<p>The scale parameter sets the light loss of the sky illuminance in the skylight model using the <code>sky condition</code> parameter in order to account for environmental conditions. This parameter is estimated during optimization, but at times competes with the estimated latitude parameter (depending on the optimization setup and used data). This parameter therefore needs to be chosen carefully, to allow for enough flexibility to account for environmental factors.</p>
<p>These environmental factors take several forms. For an unobstructed sky view the scale parameters (sky condition) varies between values of one (1) for a clear sky, to 3 for an average sky (30% cloud cover) to ten (10) for a dense dark cloudy sky (uncommon). However, if an individual spends a lot of time in vegetation illuminance values can be lower as the environment further attenuates the ambient light conditions. Should a sensor be covered by additional feathers or fur the registered values might be lower still.</p>
<div class="section level4" number="2.3.1">
<h4 id="light-loss-theory">
<span class="header-section-number">2.3.1</span> Light loss theory<a class="anchor" aria-label="anchor" href="#light-loss-theory"></a>
</h4>
<p>Light loss can be described as:</p>
<p>light loss = <span class="math inline">\(Q_{F}(sky condition, LAI)\)</span> + <span class="math inline">\(f_{sensor}(sky condition, coverage)\)</span> + <span class="math inline">\(\epsilon\)</span></p>
<p>Where both <span class="math inline">\(Q_{F}()\)</span> and <span class="math inline">\(f_{sensor}(coverage)\)</span> are dependent on the initial sky conditions in their own right. During optimization the upper bound of the scale should however not be a mere guess. Depending on the behaviour of the individual a physics informed constraint can be used.</p>
<p>Where light loss through a canopy is described according to the Beer–Lambert Law.</p>
<p><span class="math inline">\(Q_F\)</span> = <span class="math inline">\(Q_0 e^{–kF}\)</span></p>
<p>Where <span class="math inline">\(Q_{F}\)</span> is the light level for a given level F, with k dependent on the canopy complexity (where literature often cites a value of 0.5 as a good middle ground). Maximum F is determined by the density of the vegetation or Leaf Area Index (LAI, dimensionless), expressed as leaves (<span class="math inline">\(m^2\)</span>) per surface area (<span class="math inline">\(m^2\)</span>). LAI reach a maximum of 10 for certain dense needleleaf forests, but are generally far lower.</p>
<p>Assuming a k of 0.5 and a maximum LAI of 6 (a reasonable maximum for broadleaf forests) we get a light loss relative to the original solar illuminance of about 5%. We can map the <code>sky condition</code> parameter to LAI (using an average sky as a reference). This inverse mapping allows us to estimate the vegetation density in which an individual (bird) is located (assuming an average sky and limited sensor losses). Turning this around, if you know the ecology of an individual you can then use this relationship to set the upper scale factor, under ideal conditions. The below graph shows the relationship between the scale factor and LAI for an average sky (sky conditions of 3 in the {skylight} model). Working on the assumption that most dense vegetation have a LAI of four to six, one can expect the scale factor to rarely exceed 50 unless other factors are at play.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the attenuation Beer-Lambert for LAI</span></span>
<span><span class="va">lai_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="va">lai_att</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span> <span class="op">*</span> <span class="va">lai_range</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set the range of scale factors</span></span>
<span><span class="va">scale_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2000</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate "sky condition" based attenuation values</span></span>
<span><span class="va">sky_att</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">scale_factor</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">ideal</span> <span class="op">&lt;-</span> <span class="fu">skylight</span><span class="fu">::</span><span class="fu"><a href="https://bluegreen-labs.github.io/skylight/reference/skylight.html" class="external-link">skylight</a></span><span class="op">(</span></span>
<span>    date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2022-01-01 12:00:00"</span><span class="op">)</span>,</span>
<span>    latitude <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    longitude <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    sky_condition <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">sun_illuminance</span></span>
<span></span>
<span>  <span class="va">c</span> <span class="op">&lt;-</span> <span class="fu">skylight</span><span class="fu">::</span><span class="fu"><a href="https://bluegreen-labs.github.io/skylight/reference/skylight.html" class="external-link">skylight</a></span><span class="op">(</span></span>
<span>    date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2022-01-01 12:00:00"</span><span class="op">)</span>,</span>
<span>    latitude <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    longitude <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    sky_condition <span class="op">=</span> <span class="va">i</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">sun_illuminance</span> <span class="op">/</span> <span class="va">ideal</span></span>
<span></span>
<span>  <span class="va">c</span> <span class="op">&lt;-</span> <span class="va">c</span> <span class="op">*</span> <span class="fl">100</span></span>
<span>  <span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">c</span> <span class="op">&gt;</span> <span class="fl">100</span>, <span class="cn">NA</span>, <span class="va">c</span><span class="op">)</span></span>
<span>  <span class="va">c</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">-</span> <span class="va">c</span></span>
<span><span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">lai_scale_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">lai_att</span>, <span class="kw">function</span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">scale_factor</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">sky_att</span> <span class="op">-</span> <span class="va">a</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span></span>
<span>    <span class="va">lai_range</span>,</span>
<span>    <span class="va">lai_scale_factor</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"LAI ~ scale factors"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"LAI"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"scale factor"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="skytrackr_optimization_files/figure-html/unnamed-chunk-3-1.png" width="85%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4" number="2.3.2">
<h4 id="estimating-the-scale-from-data">
<span class="header-section-number">2.3.2</span> Estimating the scale from data<a class="anchor" aria-label="anchor" href="#estimating-the-scale-from-data"></a>
</h4>
<p>Working on the assumption that the sensor is correctly installed and the sensor error is minimal we can estimate the light loss from the data itself if a full diurnal profile is measured. Here, the difference between the maximum solar illuminance at noon can be compared with the measured maximum daily values. These values should give a crude estimate of the total light loss (without a need for attribution to vegetation, sky or other environmental conditions). Generally, Migrate Technology Ltd. sensors track close to true physical values. The included function <code><a href="../reference/stk_calibrate.html">stk_calibrate()</a></code> returns the 90th quantile of the estimated daily scale factors across the data, which can then be used as upper value to the scale parameter in <code><a href="../reference/skytrackr.html">skytrackr()</a></code>.</p>
</div>
</div>
<div class="section level3" number="2.4">
<h3 id="optimization-iterations">
<span class="header-section-number">2.4</span> Optimization iterations<a class="anchor" aria-label="anchor" href="#optimization-iterations"></a>
</h3>
<p>There is also a trade-off between the amount of data used in a location estimate and the number of iterations used during optimization. If your data quality, and or frequency, is low it is advised to increase the number of optimization iterations. For <strong>high quality</strong> data <strong>3000 iterations</strong> generally yields good results, but increasing this number to <strong>6000 might provide a more robust estimate</strong> in some cases. It is advised to inspect the performance of the routine on a single logger, before proceeding to (batch) process all data. Iteration values in excess of 10K should generally not be required.</p>
</div>
<div class="section level3" number="2.5">
<h3 id="step-selection-dynamics">
<span class="header-section-number">2.5</span> Step-selection dynamics<a class="anchor" aria-label="anchor" href="#step-selection-dynamics"></a>
</h3>
<p>The step-selection function constrains the validity of a proposed location estimate. However, the function used is approximate only. It must also be noted that while an individual might move a long distance across a day (in absolute sense), its position from day-to-day might not move much (e.g. in the most extreme case, there is no day-to-day movement if the individual returns to a nesting location). <strong>The step-selection function should reflect short-distance ranging movements</strong> (i.e. rapid decay) rather than long-distance migration movements.</p>
</div>
</div>
<div class="section level2" number="3">
<h2 id="post-processing">
<span class="header-section-number">3</span> Post-processing<a class="anchor" aria-label="anchor" href="#post-processing"></a>
</h2>
<p>After estimating locations you can inspect the location estimation data using the <code><a href="../reference/stk_map.html">stk_map()</a></code> function. This will give you an initial idea on the accuracy of the estimates. The spread of the uncertainty on both longitude and latitude parameters can help determine the quality of the estimated locations. If available, a Gelman-Rubin Diagnostic (or grd value) is returned in the data output. Gelman-Rubin Diagnostic values &lt; 1.05 are generally considered showing convergence of the parameter (location) estimates.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/bluegreen-labs" target="_blank" class="external-link">
                          <div class="icon fab fa-github"></div></a>
                        <a href="https://bluegreenlabs.org/labs/" target="_blank" class="external-link">
                          <div class="icon fa fa-flask"></div></a>
                        <a href="https://www.linkedin.com/company/bluegreen-labs/" target="_blank" class="external-link">
                          <div class="icon fa fa-linkedin"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://bluegreenlabs.org/#intro" class="external-link">BlueGreen Labs</a></li>
                            <li><a href="https://bluegreenlabs.org/#people" class="external-link">Our Team</a></li>
                            <li><a href="https://bluegreenlabs.org/#contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://github.com/bluegreen-labs" class="external-link">Packages</a></li>
                            <li><a href="https://bluegreenlabs.org/publication/" class="external-link">Publications</a></li>
                            <li><a href="https://bluegreenlabs.org/post/" class="external-link">Blog</a></li>
                        </ul>
</div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>






  </body>
</html>
